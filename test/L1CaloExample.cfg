

process L1CaloExample  = {

   include "FWCore/MessageLogger/data/MessageLogger.cfi"
  
   source = PoolSource {
	untracked vstring fileNames = {
#          "/store/RelVal/2007/5/11/RelVal-RelVal_Marcelo_140Z-EE-1178901791/0000/0ABFDEEA-7000-DC11-8AB4-000E0C3F147C.root"
#	"file:/afs/cern.ch/user/j/jbrooke/public/150pre5_single_e_pt35_L1.root"
	"/store/RelVal/2007/6/4/RelVal-RelVal150pre5QCD_pt80_120-1180948067/0000/7214955D-FF12-DC11-8BFA-001731A28F19.root"	
	}
   }

   untracked PSet maxEvents = { untracked int32 input = 50 }

   # Geometry
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
   include "Geometry/CaloEventSetup/data/CaloGeometry.cff"
   include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"
   include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

   # ECAL TPG (needed for running on 140 files)
#   include "Geometry/EcalMapping/data/EcalMapping.cfi"
#   include "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis_with_suppressed.cff"
#   include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"

   # include L1 emulator
   include "L1Trigger/Configuration/data/L1CaloEmulator.cff"

   #include L1 extra producer
   include "L1Trigger/L1ExtraFromDigis/data/l1extraParticles.cfi"

   replace l1extraParticles.produceMuonParticles = false
   replace l1extraParticles.isolatedEmSource = l1GctEmulDigis:isoEm
   replace l1extraParticles.nonIsolatedEmSource = l1GctEmulDigis:nonIsoEm
   replace l1extraParticles.forwardJetSource = l1GctEmulDigis:forJets
   replace l1extraParticles.centralJetSource = l1GctEmulDigis:cenJets
   replace l1extraParticles.tauJetSource = l1GctEmulDigis:tauJets
   replace l1extraParticles.etTotalSource = l1GctEmulDigis
   replace l1extraParticles.etHadSource = l1GctEmulDigis
   replace l1extraParticles.etMissSource = l1GctEmulDigis

#   path p = { ecalTriggerPrimitiveDigis, L1CaloEmulator, l1extraParticles }
   path p = { L1CaloEmulator, l1extraParticles }

   # write out Root file
   module outputEvents = PoolOutputModule
   {
	untracked vstring outputCommands =
	{
	    "drop *",
    "keep *_ecalTriggerPrimitiveDigis_*_*",
    "keep *_hcalTriggerPrimitiveDigis_*_*",
    "keep *_l1RctEmulDigis_*_*",
    "keep *_l1GctEmulDigis_*_*",
    "keep *_l1CscTpgEmulDigis_*_*",
    "keep *_l1CscTfTrackEmulDigis_*_*",
    "keep *_l1CscTfEmulDigis_*_*",
    "keep *_l1DTTPGEmulDigis_*_*",
    "keep *_l1DttfEmulDigis_*_*",
    "keep *_l1RpcEmulDigis_*_*",
    "keep *_l1GmtEmulDigis_*_*",
    "keep *_l1GtEmulDigis_*_*",
    "keep *_l1extraParticles_*_*"
	}
      untracked string fileName = "L1CaloExample.root"
   }

   endpath outpath = { outputEvents }

}

