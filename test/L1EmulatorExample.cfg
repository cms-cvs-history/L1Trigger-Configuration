
process L1EmulatorExample  = {

   include "FWCore/MessageLogger/data/MessageLogger.cfi"
  
   source = PoolSource {
	untracked vstring fileNames = {
        "/store/RelVal/2007/5/11/RelVal-RelVal_Marcelo_140SingleMuPlusPt100-1178891855/0000/1C6DCCF3-0000-DC11-848E-00304885B1DA.root"
	}
   }

   untracked PSet maxEvents = { untracked int32 input = 10 }

   # Geometry
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
   include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

   # Muon DT fix
   es_module = MuonNumberingInitialization { }

   # include L1 emulator
   include "L1Trigger/Configuration/data/L1Emulator.cff"

   replace l1extraParticles.muonSource = l1GmtEmulDigis
   replace l1extraParticles.isolatedEmSource = l1GctEmulDigis:isoEm
   replace l1extraParticles.nonIsolatedEmSource = l1GctEmulDigis:nonIsoEm
   replace l1extraParticles.forwardJetSource = l1GctEmulDigis:forJets
   replace l1extraParticles.centralJetSource = l1GctEmulDigis:cenJets
   replace l1extraParticles.tauJetSource = l1GctEmulDigis:tauJets
   replace l1extraParticles.etTotalSource = l1GctEmulDigis
   replace l1extraParticles.etHadSource = l1GctEmulDigis
   replace l1extraParticles.etMissSource = l1GctEmulDigis

   path p = { L1Emulator }

   # write out Root file
   module outputEvents = PoolOutputModule
   {
	untracked vstring outputCommands =
	{
    "drop *",
    "keep *_ecalTriggerPrimitiveDigis_*_*",
    "keep *_hcalTriggerPrimitiveDigis_*_*",
    "keep *_l1GctEmulDigis_*_*",
    "keep *_L1RCTRegionSumsEmCands_*_*",
    "keep *_dttpgprod_*_*", 
    "keep *_l1DttfEmulDigis_*_*",
      "keep *_l1csctracks_*_*",
       "keep *_csctfmuonsorter_*_*",
       "keep *_rpctrig_*_*",
       "keep *_l1GmtEmulDigis_*_*",
       "keep *_l1extraParticles_*_*"
	}
      untracked string fileName = "L1EmulatorExample.root"
   }

   endpath outpath = { outputEvents }

}

